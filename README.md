<div align="center">
  <img src="assets/banner.png" alt="ShifrBot Banner" width="100%" />

  <h1>ShifrBot</h1>
  <p>
    –ü—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π Telegram-–±–æ—Ç –Ω–∞ <b>aiogram 3</b> –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π<br/>
    –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ <code>SHIFR1.&lt;payload&gt;</code>.
  </p>

  <p>
    <img src="https://img.shields.io/badge/Python-3.10%2B-3776AB?logo=python&logoColor=white" alt="Python" />
    <img src="https://img.shields.io/badge/aiogram-3.x-2CA5E0" alt="aiogram" />
    <img src="https://img.shields.io/badge/Telegram-Bot-26A5E4?logo=telegram" alt="Telegram Bot" />
    <img src="https://img.shields.io/badge/Platform-Windows%20%7C%20Linux%20%7C%20macOS-111827" alt="Platform" />
  </p>
</div>

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–î–µ–º–æ](#–¥–µ–º–æ)
- [–ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç](#—á—Ç–æ-—É–º–µ–µ—Ç-–±–æ—Ç)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–º–∞–Ω–¥—ã –∏ –∫–Ω–æ–ø–∫–∏](#–∫–æ–º–∞–Ω–¥—ã-–∏-–∫–Ω–æ–ø–∫–∏)
- [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—É—à–µ–º](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–µ—Ä–µ–¥-–ø—É—à–µ–º)
- [Troubleshooting](#troubleshooting)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [Roadmap](#roadmap)

---

## –î–µ–º–æ

<table>
  <tr>
    <td align="center"><b>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</b></td>
    <td align="center"><b>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞</b></td>
  </tr>
  <tr>
    <td><img src="assets/demo-encrypt.gif" alt="Encrypt demo" width="320"/></td>
    <td><img src="assets/demo-decrypt.gif" alt="Decrypt demo" width="320"/></td>
  </tr>
</table>

> [!TIP]
> –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ —Ä–∞–∑–≥–ª–∞—à–∞—Ç—å SHIFR1 —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.

## –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç

- –®–∏—Ñ—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –≤ —Ç–æ–∫–µ–Ω —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `SHIFR1.`.
- –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —ç—Ç–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ (HMAC), —á—Ç–æ–±—ã –æ—Ç—Å–µ—á—å —Å–ª—É—á–∞–π–Ω—ã–µ/–±–∏—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–º–µ–Ω—É —Ç–µ–∫—É—â–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –∏ `/cancel`.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1) –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone <URL_–¢–í–û–ï–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>
cd shifrbot
```

### 2) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

<details>
<summary><b>Windows (PowerShell)</b></summary>

```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
$env:BOT_TOKEN="123456:ABCDEF_your_real_token"
python shif.py
```

</details>

<details>
<summary><b>Linux / macOS</b></summary>

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
export BOT_TOKEN="123456:ABCDEF_your_real_token"
python shif.py
```

</details>

> [!IMPORTANT]
> –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –±–µ—Ä–µ—Ç—Å—è —É `@BotFather`. –ë–µ–∑ `BOT_TOKEN` –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

## –ö–æ–º–∞–Ω–¥—ã –∏ –∫–Ω–æ–ø–∫–∏

### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
| --- | --- |
| `/start` | –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/cancel` | –û—Ç–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ |

### –ö–Ω–æ–ø–∫–∏

| –ö–Ω–æ–ø–∫–∞ | –°—Ü–µ–Ω–∞—Ä–∏–π |
| --- | --- |
| `üîê –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å` | –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω |
| `üîì –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å` | –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç |
| `‚ùå –û—Ç–º–µ–Ω–∞` | –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –≤–≤–æ–¥ |

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```mermaid
flowchart TD
    A[/start/] --> B[–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é]
    B --> C[–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞: –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å]
    C --> D[–í–≤–æ–¥ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞]
    D --> E[–¢–æ–∫–µ–Ω SHIFR1.*]

    B --> F[–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞: –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å]
    F --> G[–í–≤–æ–¥ —Ç–æ–∫–µ–Ω–∞ SHIFR1.*]
    G --> H{–ü—Ä–æ–≤–µ—Ä–∫–∞ HMAC}
    H -- OK --> I[–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç]
    H -- FAIL --> J[–û—à–∏–±–∫–∞: –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —à–∏—Ñ—Ä]
```

### –í–Ω—É—Ç—Ä–∏ —Ç–æ–∫–µ–Ω–∞

1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è `nonce`.
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª—é—á-–ø–æ—Ç–æ–∫ –Ω–∞ –±–∞–∑–µ `SHA-256`.
3. –°–æ–æ–±—â–µ–Ω–∏–µ —à–∏—Ñ—Ä—É–µ—Ç—Å—è –ø–æ–±–∞–π—Ç–Ω–æ (XOR-–º–∞—Å–∫–∞).
4. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è `HMAC` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏.
5. –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤ URL-safe Base64 –∏ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å `SHIFR1.`.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ì–¥–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- |
| `BOT_TOKEN` | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω) |
| `SECRET_KEY` | `shif.py` | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è |
| `CIPHER_PREFIX` | `shif.py` | –ü—Ä–µ—Ñ–∏–∫—Å —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–æ–∫–µ–Ω–∞ |
| `NONCE_SIZE` | `shif.py` | –†–∞–∑–º–µ—Ä nonce |
| `MAC_SIZE` | `shif.py` | –î–ª–∏–Ω–∞ –ø–æ–¥–ø–∏—Å–∏ HMAC |

> [!WARNING]
> –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `SECRET_KEY` —Å—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
shifrbot/
‚îú‚îÄ assets/
‚îÇ  ‚îú‚îÄ banner.png
‚îÇ  ‚îú‚îÄ demo-encrypt.gif
‚îÇ  ‚îî‚îÄ demo-decrypt.gif
‚îú‚îÄ shif.py
‚îú‚îÄ requirements.txt
‚îî‚îÄ README.md
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—É—à–µ–º

```bash
python -m py_compile shif.py
```

## Troubleshooting

- `RuntimeError: ... BOT_TOKEN`
  - –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_TOKEN`.
- `–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —à–∏—Ñ—Ä–∞`
  - –ü–µ—Ä–µ–¥–∞–Ω —Ç–µ–∫—Å—Ç –Ω–µ —Ñ–æ—Ä–º–∞—Ç–∞ `SHIFR1...`.
- `–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞`
  - –¢–æ–∫–µ–Ω –ø–æ–≤—Ä–µ–∂–¥–µ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞–Ω —Å –¥—Ä—É–≥–∏–º `SECRET_KEY`.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É—á–µ–±–Ω—ã—Ö –∏ –±—ã—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á.
- –î–ª—è production-—Å–µ–∫—Ä–µ—Ç–æ–≤ –ª—É—á—à–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫—Ä–∏–ø—Ç–æ–ø—Ä–∏–º–∏—Ç–∏–≤—ã –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π secret management.
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π `BOT_TOKEN` –∏ —Ä–∞–±–æ—á–∏–π `SECRET_KEY`.

## Roadmap

- [ ] –í—ã–Ω–µ—Å—Ç–∏ `SECRET_KEY` –≤ `.env`
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –Ω–∞ `encrypt/decrypt`
- [ ] Dockerfile + docker-compose
- [ ] Inline-–∫–Ω–æ–ø–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π

---

<div align="center">
  –°–¥–µ–ª–∞–Ω–æ —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —É–¥–æ–±—Å—Ç–≤–æ, —á–∏—Å—Ç—ã–π UX –∏ –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫.
</div>
